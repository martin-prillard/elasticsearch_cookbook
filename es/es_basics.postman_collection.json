{
	"info": {
		"_postman_id": "87c381a5-08c5-4059-92ce-e40acc96afce",
		"name": "ES - TD1 2025",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "39681976"
	},
	"item": [
		{
			"name": "0 - fix index settings read only",
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"index.blocks.read_only_allow_delete\": null\n}"
				},
				"url": {
					"raw": "http://localhost:9200/tweet/_settings",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "9200",
					"path": [
						"tweet",
						"_settings"
					]
				}
			},
			"response": []
		},
		{
			"name": "0. check ES",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "http://localhost:9200/_cluster/health",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "9200",
					"path": [
						"_cluster",
						"health"
					]
				}
			},
			"response": []
		},
		{
			"name": "1 - créer un index",
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n  \"settings\" : {\r\n    \"index\" : {\r\n      \"number_of_shards\" : 1,\r\n      \"number_of_replicas\" : 1\r\n    }\r\n  }\r\n}\r\n"
				},
				"url": {
					"raw": "http://localhost:9200/tweet",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "9200",
					"path": [
						"tweet"
					]
				}
			},
			"response": []
		},
		{
			"name": "1 - supprimer un index",
			"request": {
				"method": "DELETE",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": ""
				},
				"url": {
					"raw": "http://localhost:9200/tweet",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "9200",
					"path": [
						"tweet"
					]
				}
			},
			"response": []
		},
		{
			"name": "2 - mapping",
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n\t\"mappings\": {\n\t  \"properties\": {\n\t    \"user_name\": { \"type\": \"keyword\" },\n\t    \"content\": { \"type\": \"text\" },\n\t    \"tweeted_at\": { \"type\": \"date\" }\n\t  }\n\t}\n}"
				},
				"url": {
					"raw": "http://localhost:9200/tweet",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "9200",
					"path": [
						"tweet"
					]
				},
				"description": "Revient a supprimer l'index"
			},
			"response": []
		},
		{
			"name": "3 - ajouter un document JSON",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{ \r\n  \"user_name\" : \"Trump\",\r\n  \"content\" : \"THE USA IS GREAT!\",\r\n  \"tweeted_at\" : \"2019-01-10\"\r\n}"
				},
				"url": {
					"raw": "http://localhost:9200/tweet/_doc/",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "9200",
					"path": [
						"tweet",
						"_doc",
						""
					]
				},
				"description": "POST: crée un nouveau document dans un type spécifié (qu'il existe ou non)\nOU\nPUT: crée un nouveau document dans un type spécifié (qu'il existe ou non). Mais obligé de spécifier son ID"
			},
			"response": []
		},
		{
			"name": "4 - inserer de multiples documents",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{ \"index\" : { \"_index\" : \"tweet\", \"_id\" : \"1\" } }\r\n{ \"user_name\" : \"Poutine\", \"content\" : \"You are so 2019.. now it's Russia!\", \"tweeted_at\" : \"2022-03-14\"}\r\n{ \"index\" : { \"_index\" : \"tweet\", \"_id\" : \"2\" } }\r\n{ \"user_name\" : \"Zelensky\", \"content\" : \"Russia doesn't mean Ukraine...\", \"tweeted_at\" : \"2022-03-15\"}\r\n{ \"index\" : { \"_index\" : \"tweet\", \"_id\" : \"3\" } }\r\n{ \"user_name\" : \"Trump\", \"content\" : \"Sorry guys, I can't play with you, I'm retired now\", \"tweeted_at\" : \"2022-03-16\"}\r\n"
				},
				"url": {
					"raw": "http://localhost:9200/_bulk",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "9200",
					"path": [
						"_bulk"
					]
				}
			},
			"response": []
		},
		{
			"name": "5 - supprimer un document",
			"request": {
				"method": "DELETE",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": ""
				},
				"url": {
					"raw": "http://localhost:9200/tweet/_doc/1",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "9200",
					"path": [
						"tweet",
						"_doc",
						"1"
					]
				}
			},
			"response": []
		},
		{
			"name": "6 - faire une recherche dans l'index que vous avez créé",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": ""
				},
				"url": {
					"raw": "http://localhost:9200/tweet/_search",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "9200",
					"path": [
						"tweet",
						"_search"
					]
				}
			},
			"response": []
		},
		{
			"name": "6 - count tweet par président",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n    \"aggs\" : {\r\n        \"presidents\" : {\r\n            \"terms\" : {\r\n              \"field\" : \"user_name\"\r\n            }\r\n        }\r\n    }\r\n}"
				},
				"url": {
					"raw": "http://localhost:9200/tweet/_search",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "9200",
					"path": [
						"tweet",
						"_search"
					]
				}
			},
			"response": []
		},
		{
			"name": "7 - nouvel index",
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n  \"settings\" : {\r\n    \"index\" : {\r\n      \"number_of_shards\" : 1,\r\n      \"number_of_replicas\" : 1\r\n    }\r\n  }\r\n}"
				},
				"url": {
					"raw": "http://localhost:9200/private_message",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "9200",
					"path": [
						"private_message"
					]
				}
			},
			"response": []
		},
		{
			"name": "7 - ajouter un document JSON",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{ \r\n  \"user_name_a\" : \"Poutine\",\r\n  \"user_name_b\" : \"Trump\",\r\n  \"content\" : \"I miss you Donald\",\r\n  \"tweeted_at\" : \"2022-03-16\"\r\n}"
				},
				"url": {
					"raw": "http://localhost:9200/private_message/_doc/",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "9200",
					"path": [
						"private_message",
						"_doc",
						""
					]
				},
				"description": "POST: crée un nouveau document dans un type spécifié (qu'il existe ou non)\nOU\nPUT: crée un nouveau document dans un type spécifié (qu'il existe ou non). Mais obligé de spécifier son ID"
			},
			"response": []
		},
		{
			"name": "8 - Alias",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\r\n    \"actions\" : [\r\n        { \"add\" : { \"indices\" : [\"private_message\", \"tweet\"], \"alias\" : \"flux\" } }\r\n    ]\r\n}"
				},
				"url": {
					"raw": "http://localhost:9200/_aliases",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "9200",
					"path": [
						"_aliases"
					]
				}
			},
			"response": []
		},
		{
			"name": "9 - test alias",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "http://localhost:9200/flux/_search",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "9200",
					"path": [
						"flux",
						"_search"
					]
				}
			},
			"response": []
		},
		{
			"name": "Clean all",
			"request": {
				"method": "DELETE",
				"header": [],
				"url": {
					"raw": "http://localhost:9200/private_message",
					"protocol": "http",
					"host": [
						"localhost"
					],
					"port": "9200",
					"path": [
						"private_message"
					]
				}
			},
			"response": []
		}
	]
}